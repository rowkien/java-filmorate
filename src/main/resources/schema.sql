CREATE TABLE IF NOT EXISTS users
(
user_id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
email VARCHAR NOT NULL,
login VARCHAR NOT NULL,
name VARCHAR NOT NULL,
birthday TIMESTAMP NOT NULL
);

CREATE TABLE IF NOT EXISTS users_friends
(
user_id INTEGER REFERENCES users (user_id),
friend_id INTEGER REFERENCES users (user_id)
);

CREATE TABLE IF NOT EXISTS films
(
film_id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
name VARCHAR NOT NULL,
description VARCHAR NOT NULL,
duration INTEGER NOT NULL,
release_date TIMESTAMP NOT NULL,
mpa_id INTEGER NOT NULL REFERENCES mpa (mpa_id)
);

CREATE TABLE IF NOT EXISTS films_likes
(
film_id INTEGER REFERENCES films (film_id),
user_id INTEGER REFERENCES users (user_id)
);

CREATE TABLE IF NOT EXISTS genre
(
genre_id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
name VARCHAR
);

CREATE TABLE IF NOT EXISTS films_genre
(
film_id INTEGER REFERENCES films (film_id),
genre_id INTEGER REFERENCES genre (genre_id)
);

CREATE TABLE IF NOT EXISTS mpa
(
mpa_id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
name VARCHAR
);

